/*
 * -------------------------------------------------
 *  Nextflow config file for running tests
 * -------------------------------------------------
 * Defines bundled input files and everything required
 * to run a fast and simple test. Use as follows:
 *   nextflow run nf-core/airrflow -profile test_mixcr_sc,<docker/singularity>
 */

includeConfig "https://raw.githubusercontent.com/nf-core/test-datasets/airrflow/testdata-mixcr/10x_sc.conf"

process {
    resourceLimits = [
        cpus: 2,
        memory: '6.GB',
        time: '1.h'
    ]
}

params {
    config_profile_name = 'Test MiXCR sc analysis.'
    config_profile_description = 'Minimal test dataset to check pipeline functionality with raw single cell data from 10xGenomics using the MiXCR toolset'

    // params
    mode = 'fastq'
    library_generation_method = 'mixcr'
    clonal_threshold = 0
    kit = '10x-sc-xcr-vdj'
    mixcr_postanalysis = true
    mixcr_downsampling = "count-read-auto"
    mixcr_weightfunction = "none"
    mixcr_productive_only = true
    mixcr_drop_outliers = true
    mixcr_overlap_criteria = "CDR3|AA|V|J"
    mixcr_diversity_plottype = "boxplot"


    // Input data
    input = pipelines_testdata_base_path + 'testdata-sc/10x_sc_raw.tsv'
    reference_10x = pipelines_testdata_base_path + 'testdata-sc/refdata-cellranger-vdj-GRCh38-alts-ensembl-5.0.0.tar.gz'
    imgt_mixcr = "https://github.com/repseqio/library-imgt/releases/download/v8/imgt.202312-3.sv8.json.gz"
}
